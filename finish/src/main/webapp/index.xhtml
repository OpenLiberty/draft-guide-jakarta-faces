<!DOCTYPE html>
<!-- tag::xmlns[] -->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets">
<!-- end::xmlns[] -->

    <h:head>
        <meta charset="UTF-8" />
        <title>Open Liberty System Load</title>
        <h:outputStylesheet library="css" name="styles.css" />
        <link href="favicon.ico" rel="icon" />
        <link href="favicon.ico" rel="shortcut icon" />
    </h:head>
    <h:body>
        <section id="appIntro">
            <div id="titleSection">
                <h1 id="appTitle">Open Liberty System Load</h1>
                <div class="line"></div>
                <div class="headerImage"></div>
            </div>

            <div class="msSection" id="systemLoads">
                <!-- tag::systemLoadForm[] -->
                <h:form id="systemLoadForm">
                    <div class="headerRow">
                        <div class="headerIcon">
                            <!-- Example of referencing an image -->
                            <img src="#{resource['img/sysProps.svg']}" />
                        </div>
                        <div class="headerTitleWithButton" id="sysPropTitle">
                            <h2>System Loads</h2>
                            <!-- tag::commandButton[] -->
                            <!-- tag::commandButtonAction[] -->
                            <h:commandButton id="refreshButton" value="" action="#{systemLoadBean.fetchSystemLoad}" styleClass="refreshButton">
                            <!-- end::commandButtonAction[] -->
                                <!-- tag::ajaxTag[] -->
                                <f:ajax render="systemLoadForm" />
                                <!-- end::ajaxTag[] -->
                            </h:commandButton>
                            <!-- end::commandButton[] -->
                        </div>
                    </div>

                    <div class="sectionContent">
                        <!-- tag::systemLoadsTable[] -->
                        <table id="systemLoadsTable">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>System Load</th>
                                    <th>Memory Usage (%)</th>
                                </tr>
                            </thead>
                            <tbody id="systemLoadsTableBody">
                                <!-- Iterate over system loads from the backing bean -->
                                <!-- tag::uiRepeat[] -->
                                <!-- tag::dataBind[] -->
                                <ui:repeat value="#{systemLoadBean.systemLoads}" var="data">
                                <!-- end::dataBind[] -->
                                    <tr>
                                        <td>
                                            <!-- tag::outputText1[] -->
                                            <h:outputText value="#{data.time}" />
                                            <!-- end::outputText1[] -->
                                        </td>
                                        <td>
                                            <!-- tag::outputText2[] -->
                                            <h:outputText value="#{data.loadAverage == null ? '-' : data.loadAverage}">
                                                <!-- tag::convertNumber1[] -->
                                                <f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
                                                <!-- end::convertNumber1[] -->
                                            </h:outputText>
                                            <!-- end::outputText2[] -->
                                        </td>
                                        <td>
                                            <!-- tag::outputText3[] -->
                                            <h:outputText value="#{data.memoryUsage == null ? '-' : data.memoryUsage}">
                                                <!-- tag::convertNumber2[] -->
                                                <f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
                                                <!-- end::convertNumber2[] -->
                                            </h:outputText>
                                            <!-- tag::outputText3[] -->
                                        </td>
                                    </tr>
                                </ui:repeat>
                                <!-- end::uiRepeat[] -->
                            </tbody>
                        </table>
                        <!-- end::systemLoadsTable[] -->
                    </div>
                </h:form>
                <!-- end::systemLoadForm[] -->
            </div>
        </section>
        
        <ui:include src="/WEB-INF/includes/footer.xhtml" />
    </h:body>
</html>
